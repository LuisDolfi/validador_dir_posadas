{% extends "base.html" %}
{% block title %}Validador · Usuario{% endblock %}
{% block content %}

<form method="post" class="bg-white p-4 rounded-xl shadow mb-6">
  {% csrf_token %}
  <label class="block text-sm mb-2 font-medium">Dirección (ej: “Mitre 1234” o “San Martín y Córdoba”)</label>
  <div class="flex gap-3">
    <input name="direccion" class="flex-1 border rounded px-3 py-2" placeholder="Escribí aquí..." autofocus>
    <button class="px-4 py-2 bg-black text-white rounded">Validar</button>
  </div>
</form>

{% if result %}
  <div class="grid md:grid-cols-2 gap-6">
    <div class="bg-white p-4 rounded-xl shadow">
      <h3 class="font-semibold mb-3">Resultado</h3>
      <dl class="text-sm space-y-2">
        <div><dt class="font-medium inline">Entrada:</dt> <dd class="inline">{{ result.input }}</dd></div>
        <div><dt class="font-medium inline">Normalizada:</dt> <dd class="inline">{{ result.normalized }}</dd></div>
        <div><dt class="font-medium inline">Estado:</dt> <dd class="inline">{{ result.status|default:"-" }}</dd></div>
        <div><dt class="font-medium inline">Motivo LLM:</dt> <dd class="inline">{{ result.reason|default:"-" }}</dd></div>
      </dl>
    </div>

    <div class="bg-white p-4 rounded-xl shadow">
      <h3 class="font-semibold mb-3">Coincidencias / Match</h3>
      <pre class="text-xs bg-gray-50 p-3 rounded overflow-x-auto">{{ result.match|default:result.coincidencias|safe }}</pre>
    </div>
  </div>
{% endif %}

<div class="mt-6">
  <a class="text-sm underline" href="{% url 'validacion:historial' %}">Ver historial</a>
</div>
{% endblock %}
